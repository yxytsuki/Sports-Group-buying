{"version":3,"file":"studentSet.js","sources":["pages/studentSet/studentSet.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc3R1ZGVudFNldC9zdHVkZW50U2V0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 学员搜索 -->\r\n\t\t<uni-search-bar placeholder=\"搜索学员\" bgColor=\"#EEEEEE\" @input=\"handleInput\" @keypress=\"handleKeyPress\" />\r\n\t\t<view class=\"student-list\">\r\n\t\t\t<view class=\"student-card\" v-for=\"(student,index) in studentList\" :key=\"student.id\"\r\n\t\t\t\t@click=\"showStudentDetail(student.enrollment_id)\">\r\n\t\t\t\t<view class=\"card-content\">\r\n\t\t\t\t\t<image class=\"avatar\" :src=\"student.avatar\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t<text class=\"nickName\">{{student.nickName}}</text>\r\n\t\t\t\t\t\t<text class=\"course\">{{student.title}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"del-btn\" @click.stop=\"handleDelete(student.enrollment_id)\">\r\n\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"20\" color=\"#ff0000\"></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 详情弹窗 -->\r\n\t\t<uni-popup ref=\"detailPopup\" type=\"center\">\r\n\t\t\t<view class=\"popup-content\" v-if=\"currentStudent\">\r\n\t\t\t\t<view class=\"popup-header\">\r\n\t\t\t\t\t<text class=\"popup-title\">学员详情</text>\r\n\t\t\t\t\t<view class=\"close-btn\" @click=\"closePopup\">\r\n\t\t\t\t\t\t<uni-icons type=\"close\" size=\"20\"></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"detail-info\">\r\n\t\t\t\t\t<view class=\"detail-avatar\">\r\n\t\t\t\t\t\t<image class=\"detail-avatar\" :src=\"currentStudent.avatar\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"detail-item\">\r\n\t\t\t\t\t\t<text class=\"label\">昵称：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{currentStudent.nickName}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"detail-item\">\r\n\t\t\t\t\t\t<text class=\"label\">学号：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{currentStudent.student_id}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"detail-item\">\r\n\t\t\t\t\t\t<text class=\"label\">入学时间：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{currentStudent.enrollment_time}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"detail-item\">\r\n\t\t\t\t\t\t<text class=\"label\">联系方式：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{currentStudent.phone}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tdebounce\r\n\t} from 'lodash';\r\n\timport {\r\n\t\tgetStudentList,\r\n\t\tteacherStudentDetail,\r\n\t\tteacherStudent\r\n\t} from '../../api/student';\r\n\timport {\r\n\t\tuseUserStore\r\n\t} from '../../store/user';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tteacherId: useUserStore().userInfo.user_id,\r\n\t\t\t\tsearchKeyword: '',\r\n\t\t\t\tstudentList: [],\r\n\t\t\t\tcurrentStudent: {}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tclearTimeout(this.timer)\r\n\t\t},\r\n\r\n\t\tasync created() {\r\n\t\t\t// 创建防抖函数（500ms延迟）\r\n\t\t\tthis.debouncedInput = debounce(this.handleInput, 500);\r\n\t\t\tconst res = await getStudentList({\r\n\t\t\t\tteacher_id: this.teacherId\r\n\t\t\t})\r\n\t\t\tconsole.log(res)\r\n\t\t\tthis.studentList = [...res]\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync showStudentDetail(id) {\r\n\t\t\t\tconsole.log(id)\r\n\t\t\t\t// 调取接口获取详情\r\n\t\t\t\tconst res = await teacherStudentDetail({\r\n\t\t\t\t\tenrollment_id: id\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tthis.currentStudent = {\r\n\t\t\t\t\tenrollment_id: id,\r\n\t\t\t\t\t...res\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(this.currentStudent)\r\n\t\t\t\tthis.$refs.detailPopup.open()\r\n\t\t\t},\r\n\t\t\tclosePopup() {\r\n\t\t\t\tthis.$refs.detailPopup.close()\r\n\t\t\t},\r\n\t\t\tasync handleDelete(id) {\r\n\t\t\t\tconsole.log(id)\r\n\t\t\t\t// 调取接口删除学员\r\n\t\t\t\tconst res = await teacherStudent({\r\n\t\t\t\t\tenrollment_id: id\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tthis.doSearch()\r\n\t\t\t},\r\n\t\t\t// 输入框实时防抖处理\r\n\t\t\thandleInput(e) {\r\n\t\t\t\tthis.searchKeyword = e;\r\n\t\t\t},\r\n\t\t\t// 处理键盘事件\r\n\t\t\thandleKeyPress(e) {\r\n\t\t\t\t// 检查是否是回车键（keyCode 13 或 key 'Enter'）\r\n\t\t\t\tif (e.keyCode === 13 || e.key === 'Enter') {\r\n\t\t\t\t\tthis.doSearch();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 搜索方法\r\n\t\t\tdoSearch() {\r\n\t\t\t\tif (this.timer) {\r\n\t\t\t\t\tclearTimeout(this.timer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.timer = setTimeout(async () => {\r\n\t\t\t\t\tconst res = await getStudentList({\r\n\t\t\t\t\t\tteacher_id: this.teacherId,\r\n\t\t\t\t\t\tkeyword: this.searchKeyword\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.studentList = [...res] || [];\r\n\r\n\t\t\t\t}, 500);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n\r\n<style>\r\n\t@import url('./studentSet.css');\r\n</style>","import MiniProgramPage from 'D:/code/project/Sports-Group-buying/pages/studentSet/studentSet.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","debounce","getStudentList","uni","teacherStudentDetail","teacherStudent"],"mappings":";;;;AAmEC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,WAAWA,WAAAA,eAAe,SAAS;AAAA,MACnC,eAAe;AAAA,MACf,aAAa,CAAE;AAAA,MACf,gBAAgB,CAAC;AAAA,IAElB;AAAA,EACA;AAAA,EACD,WAAW;AACV,iBAAa,KAAK,KAAK;AAAA,EACvB;AAAA,EAED,MAAM,UAAU;AAEf,SAAK,iBAAiBC,cAAQ,cAAA,SAAC,KAAK,aAAa,GAAG;AACpD,UAAM,MAAM,MAAMC,2BAAe;AAAA,MAChC,YAAY,KAAK;AAAA,KACjB;AACDC,kBAAAA,MAAA,MAAA,OAAA,yCAAY,GAAG;AACf,SAAK,cAAc,CAAC,GAAG,GAAG;AAAA,EAC1B;AAAA,EACD,SAAS;AAAA,IACR,MAAM,kBAAkB,IAAI;AAC3BA,oBAAAA,4DAAY,EAAE;AAEd,YAAM,MAAM,MAAMC,iCAAqB;AAAA,QACtC,eAAe;AAAA,OACf;AACDD,oBAAAA,MAAA,MAAA,OAAA,yCAAY,GAAG;AACf,WAAK,iBAAiB;AAAA,QACrB,eAAe;AAAA,QACf,GAAG;AAAA,MACJ;AACAA,oBAAAA,MAAY,MAAA,OAAA,0CAAA,KAAK,cAAc;AAC/B,WAAK,MAAM,YAAY,KAAK;AAAA,IAC5B;AAAA,IACD,aAAa;AACZ,WAAK,MAAM,YAAY,MAAM;AAAA,IAC7B;AAAA,IACD,MAAM,aAAa,IAAI;AACtBA,oBAAAA,6DAAY,EAAE;AAEd,YAAM,MAAM,MAAME,2BAAe;AAAA,QAChC,eAAe;AAAA,OACf;AACDF,oBAAAA,MAAA,MAAA,OAAA,0CAAY,GAAG;AACf,WAAK,SAAS;AAAA,IACd;AAAA;AAAA,IAED,YAAY,GAAG;AACd,WAAK,gBAAgB;AAAA,IACrB;AAAA;AAAA,IAED,eAAe,GAAG;AAEjB,UAAI,EAAE,YAAY,MAAM,EAAE,QAAQ,SAAS;AAC1C,aAAK,SAAQ;AAAA,MACd;AAAA,IACA;AAAA;AAAA,IAED,WAAW;AACV,UAAI,KAAK,OAAO;AACf,qBAAa,KAAK,KAAK;AAAA,MACxB;AAEA,WAAK,QAAQ,WAAW,YAAY;AACnC,cAAM,MAAM,MAAMD,2BAAe;AAAA,UAChC,YAAY,KAAK;AAAA,UACjB,SAAS,KAAK;AAAA,QACf,CAAC;AAED,aAAK,cAAc,CAAC,GAAG,GAAG;AAAA,MAE1B,GAAE,GAAG;AAAA,IACP;AAAA,EAID;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnJD,GAAG,WAAW,eAAe;"}