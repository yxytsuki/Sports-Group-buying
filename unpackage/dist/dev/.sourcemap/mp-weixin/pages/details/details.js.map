{"version":3,"file":"details.js","sources":["pages/details/details.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGV0YWlscy9kZXRhaWxzLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"details-content\">\r\n\t\t<view class=\"details-content-img\">\r\n\t\t\t<image :src=\"courseDetail.backgroundImage\"></image>\r\n\t\t</view>\r\n\t\t<view class=\"details-content-top\">\r\n\t\t\t<view class=\"details-content-title\">\r\n\t\t\t\t{{courseDetail.title}}\r\n\t\t\t</view>\r\n\t\t\t<view class=\"details-content-teacher\">\r\n\t\t\t\t{{`上课老师：${courseDetail.teacherName}`}}\r\n\t\t\t</view>\r\n\t\t\t<view class=\"details-content-time\">\r\n\t\t\t\t<swiper class=\"details-time-swiper\" :interval=\"3000\" :duration=\"1000\">\r\n\t\t\t\t\t<swiper-item v-for=\"week in 2\" :key=\"week\">\r\n\t\t\t\t\t\t<uni-grid :column=\"4\" :highlight=\"true\">\r\n\t\t\t\t\t\t\t<uni-grid-item v-for=\"item in 4\" :index=\"item\" :key=\"item\">\r\n\t\t\t\t\t\t\t\t<view class=\"grid-item-box\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"details-time-week\">\r\n\t\t\t\t\t\t\t\t\t\t{{`第${item}周`}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text class=\"details-time-txt\">进行中</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</uni-grid-item>\r\n\t\t\t\t\t\t</uni-grid>\r\n\r\n\t\t\t\t\t</swiper-item>\r\n\r\n\t\t\t\t</swiper>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"details-content-direction\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<view class=\"details-direction-txt\">\r\n\t\t\t\t\t\t<uni-icons type=\"map-pin-ellipse\" class=\"detail-direction-icon\"></uni-icons>\r\n\t\t\t\t\t\t<span class=\"detail-direction-txt\">{{`上课时间： 10:00~12:00`}}</span>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"details-direction-txt\">\r\n\t\t\t\t\t\t<uni-icons type=\"map-pin-ellipse\" class=\"detail-direction-icon\"></uni-icons>\r\n\t\t\t\t\t\t<span class=\"detail-direction-txt\">{{`上课社区： ${courseDetail.address}`}}</span>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"details-direction-txt\">\r\n\t\t\t\t\t\t<uni-icons type=\"map-pin-ellipse\" class=\"detail-direction-icon\"></uni-icons>\r\n\t\t\t\t\t\t<span class=\"detail-direction-txt\">{{`上课地点： ${courseDetail.adressDetail}`}}</span>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"details-direction-action\">\r\n\t\t\t\t\t<uni-icons type=\"paperplane\" class=\"details-action-icon\" size=\"36\" @click=\"handleJump\"></uni-icons>\r\n\t\t\t\t\t<view class=\"details-action-txt\">\r\n\t\t\t\t\t\t导航\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"details-content-bottom\">\r\n\t\t\t<view class=\"details-content-amount\">\r\n\t\t\t\t课程单价\r\n\t\t\t\t<span class=\"details-amount-amount\">{{`￥${courseDetail.coursePrice}/节`}}</span>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"details-content-member\">\r\n\t\t\t\t<view class=\"details-member-header\">\r\n\t\t\t\t\t<view class=\"details-member-member\">\r\n\t\t\t\t\t\t{{`${courseDetail.totalNumber}人班`}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<span class=\"details-member-status\">进行中</span>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"details-member-avator\">\r\n\t\t\t\t\t<view class=\"details-member-txt\">\r\n\t\t\t\t\t\t{{`满${courseDetail.totalNumber}人成班，剩余`}}\r\n\t\t\t\t\t\t<span class=\"details-member-rest\">{{courseDetail.totalNumber - studentsNumber}}</span>个名额\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"details-avator-father\">\r\n\t\t\t\t\t\t<view class=\"details-avator-avator\" v-for=\"(item,index) in courseDetail.students\"\r\n\t\t\t\t\t\t\t:key=\"item.studentId\">\r\n\t\t\t\t\t\t\t<image :src=\"item.avator\" class=\"details-avator-img\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"details-content-footer\">\r\n\t\t\t<!-- 拼班说明 -->\r\n\t\t\t<view class=\"details-content-describe\">\r\n\t\t\t\t<view class=\"details-describe-header\">\r\n\t\t\t\t\t<view class=\"details-header-title\">\r\n\t\t\t\t\t\t拼班说明\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"details-describe-txt\">\r\n\t\t\t\t\t<view class=\"details-txt-title\">\r\n\t\t\t\t\t\t拼班说明:\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"details-txt-body\">\r\n\t\t\t\t\t\t<p v-html=\"courseDetail.courseDesc\" class=\"details-txt-txt\"></p>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 课程简介 -->\r\n\t\t\t<view class=\"details-content-describe\">\r\n\t\t\t\t<view class=\"details-describe-header\">\r\n\t\t\t\t\t<view class=\"details-header-title\">\r\n\t\t\t\t\t\t课程简介\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"details-describe-txt\">\r\n\t\t\t\t\t<view class=\"details-txt-title\">\r\n\t\t\t\t\t\t课程简介:\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"details-txt-body\">\r\n\t\t\t\t\t\t<p v-html=\"courseDetail.courseMsg\" class=\"details-txt-txt\"></p>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"details-content-join\">\r\n\t\t\t<view class=\"details-join-share\">\r\n\t\t\t\t<uni-icons type=\"undo\" class=\"details-join-icon\" size=\"30\" @click=\"handleShare\"></uni-icons>\r\n\t\t\t\t<view details-join-collectclass=\"details-join-txt\">\r\n\t\t\t\t\t分享\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"details-join-collect\">\r\n\t\t\t\t<uni-icons type=\"star\" class=\"details-join-icon\" size=\"30\" v-if=\"!courseDetail.iscollected\"\r\n\t\t\t\t\t@click=\"handleCollected\"></uni-icons>\r\n\t\t\t\t<uni-icons type=\"star-filled\" class=\"details-join-icon\" size=\"30\" color=\"#ff7357\" v-else\r\n\t\t\t\t\t@click=\"handleCollected\"></uni-icons>\r\n\t\t\t\t<view class=\"details-join-txt\">\r\n\t\t\t\t\t收藏\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"details-join-btn\" @click=\"goPay(courseId)\">\r\n\t\t\t\t加入拼班\r\n\t\t\t</view>\r\n\t\t\t<uni-popup ref=\"share\" type=\"share\" safeArea backgroundColor=\"#fff\">\r\n\t\t\t\t<uni-popup-share></uni-popup-share>\r\n\t\t\t</uni-popup>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetCourseDetail,\r\n\t\tcollected\r\n\t} from '@/api/details.js'\r\n\timport {\r\n\t\tuseUserStore\r\n\t} from '../../store/user';\r\n\r\n\timport {\r\n\t\tuseAuth\r\n\t} from '@/utils/getUserInfo.js'\r\n\texport default {\r\n\t\tonLoad(options) {\r\n\t\t\tthis.getContentList(options.id)\r\n\t\t\tthis.courseId = options.id\r\n\t\t\tconst {\r\n\t\t\t\tisLogin\r\n\t\t\t} = useAuth()\r\n\t\t\tif (!isLogin()) {\r\n\t\t\t\tconsole.log('未登录，已跳转')\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('已登录，继续执行业务逻辑')\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcourseDetail: {},\r\n\t\t\t\tstudentsNumber: 0,\r\n\t\t\t\tstartTime: '',\r\n\t\t\t\tendTime: '',\r\n\t\t\t\tcourseId: '',\r\n\t\t\t\tweekNumber: 0,\r\n\t\t\t\ttimer: null,\r\n\t\t\t\tuser_id: useUserStore().userInfo.user_id\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tclearTimeout(this.timer)\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t// 计算属性的getter\r\n\t\t\tgetWeeks() {\r\n\t\t\t\tconst start = new Date(this.startTime)\r\n\t\t\t\tconst end = new Date(this.endTime)\r\n\t\t\t\tconst diffTime = Math.abs(end - start)\r\n\t\t\t\tconst diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\r\n\t\t\t\tconst weeks = Math.ceil(diffDays / 7)\r\n\t\t\t\treturn weeks\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync getContentList(courseId) {\r\n\t\t\t\tconst data = await getCourseDetail({\r\n\t\t\t\t\tcourseId: courseId,\r\n\t\t\t\t\tuserId: this.user_id\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthis.courseDetail = data\r\n\t\t\t\tconsole.log(this.courseDetail);\r\n\t\t\t\tthis.studentsNumber = data?.students.length\r\n\t\t\t\tthis.startTime = data?.time?.startTime\r\n\t\t\t\tthis.endTime = data?.time?.endTime\r\n\t\t\t\t// 一周几节课\r\n\t\t\t\tthis.weekNumber = data?.time?.day.length\r\n\t\t\t},\r\n\t\t\tasync handleCollected() {\r\n\t\t\t\t/* \r\n\t\t\t\t\t判断是否收藏，调用接口，传入id和当前收藏状态\r\n\t\t\t\t*/\r\n\t\t\t\tconst res = await collected({\r\n\t\t\t\t\tuserId: this.user_id,\r\n\t\t\t\t\tcourseId: this.courseId,\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tif (res?.isCollected) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '收藏成功',\r\n\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\tduration: 500\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '收藏失败',\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\tduration: 500\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthis.courseDetail.iscollected = res?.isCollected\r\n\t\t\t},\r\n\t\t\thandleJump() {\r\n\t\t\t\t// 跳转百度地图 需要当前经度纬度 后续接口完善再做设计\r\n\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t// \turl: ''\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\tgoPay(id) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"跳转中...\",\r\n\t\t\t\t\ticon: \"loading\",\r\n\t\t\t\t\tmask: true,\r\n\t\t\t\t\tduration: 500\r\n\t\t\t\t})\r\n\t\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: `/pages/pay/pay?courseId=${id}`\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 500)\r\n\t\t\t},\r\n\t\t\thandleShare() {\r\n\t\t\t\tthis.shareToggle()\r\n\t\t\t},\r\n\t\t\tshareToggle() {\r\n\t\t\t\tthis.$refs.share.open()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import url(./details.css);\r\n</style>","import MiniProgramPage from 'D:/code/project/Sports-Group-buying/pages/details/details.vue'\nwx.createPage(MiniProgramPage)"],"names":["useAuth","uni","useUserStore","getCourseDetail","collected"],"mappings":";;;;;AAuJC,MAAK,YAAU;AAAA,EACd,OAAO,SAAS;AACf,SAAK,eAAe,QAAQ,EAAE;AAC9B,SAAK,WAAW,QAAQ;AACxB,UAAM;AAAA,MACL;AAAA,IACC,IAAEA,0BAAQ;AACZ,QAAI,CAAC,QAAO,GAAI;AACfC,oBAAAA,MAAA,MAAA,OAAA,oCAAY,SAAS;AAAA,WACf;AACNA,oBAAAA,uDAAY,cAAc;AAAA,IAC3B;AAAA,EAEA;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,cAAc,CAAE;AAAA,MAChB,gBAAgB;AAAA,MAChB,WAAW;AAAA,MACX,SAAS;AAAA,MACT,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,OAAO;AAAA,MACP,SAASC,WAAAA,eAAe,SAAS;AAAA,IAClC;AAAA,EACA;AAAA,EACD,WAAW;AACV,iBAAa,KAAK,KAAK;AAAA,EACvB;AAAA,EACD,UAAU;AAAA;AAAA,IAET,WAAW;AACV,YAAM,QAAQ,IAAI,KAAK,KAAK,SAAS;AACrC,YAAM,MAAM,IAAI,KAAK,KAAK,OAAO;AACjC,YAAM,WAAW,KAAK,IAAI,MAAM,KAAK;AACrC,YAAM,WAAW,KAAK,KAAK,YAAY,MAAO,KAAK,KAAK,GAAG;AAC3D,YAAM,QAAQ,KAAK,KAAK,WAAW,CAAC;AACpC,aAAO;AAAA,IACR;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,MAAM,eAAe,UAAU;;AAC9B,YAAM,OAAO,MAAMC,4BAAgB;AAAA,QAClC;AAAA,QACA,QAAQ,KAAK;AAAA,OACb;AAED,WAAK,eAAe;AACpBF,oBAAA,MAAA,MAAA,OAAA,oCAAY,KAAK,YAAY;AAC7B,WAAK,iBAAiB,6BAAM,SAAS;AACrC,WAAK,aAAY,kCAAM,SAAN,mBAAY;AAC7B,WAAK,WAAU,kCAAM,SAAN,mBAAY;AAE3B,WAAK,cAAa,kCAAM,SAAN,mBAAY,IAAI;AAAA,IAClC;AAAA,IACD,MAAM,kBAAkB;AAIvB,YAAM,MAAM,MAAMG,sBAAU;AAAA,QAC3B,QAAQ,KAAK;AAAA,QACb,UAAU,KAAK;AAAA,OACf;AACDH,oBAAAA,MAAA,MAAA,OAAA,oCAAY,GAAG;AACf,UAAI,2BAAK,aAAa;AACrBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,MAAM;AAAA,UACN,UAAU;AAAA,SACV;AAAA,aACK;AACNA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,MAAM;AAAA,UACN,UAAU;AAAA,SACV;AAAA,MACF;AACA,WAAK,aAAa,cAAc,2BAAK;AAAA,IACrC;AAAA,IACD,aAAa;AAAA,IAKZ;AAAA,IACD,MAAM,IAAI;AACTA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,QACN,MAAM;AAAA,QACN,UAAU;AAAA,OACV;AACD,WAAK,QAAQ,WAAW,MAAM;AAC7BA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK,2BAA2B,EAAE;AAAA,SAClC;AAAA,MACD,GAAE,GAAG;AAAA,IACN;AAAA,IACD,cAAc;AACb,WAAK,YAAY;AAAA,IACjB;AAAA,IACD,cAAc;AACb,WAAK,MAAM,MAAM,KAAK;AAAA,IACvB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjQD,GAAG,WAAW,eAAe;"}