{"version":3,"file":"orderListItem.js","sources":["components/orderListItem/orderListItem.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovY29kZS9wcm9qZWN0L1Nwb3J0cy1Hcm91cC1idXlpbmcvY29tcG9uZW50cy9vcmRlckxpc3RJdGVtL29yZGVyTGlzdEl0ZW0udnVl"],"sourcesContent":["<template>\r\n\t<view class=\"order-item\">\r\n\t\t<view class=\"order-title\">\r\n\t\t\t<span class=\"order-title-txt\">{{orderItem?.title}}</span>\r\n\t\t\t<!-- 订单状态是相对于现在的时间 order-title-running -->\r\n\t\t\t<view :class=\"orderItem?.status==='拼班中'?'order-title-running':'order-title-status'\">\r\n\t\t\t\t{{orderItem?.status}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"order-content\">\r\n\t\t\t<view class=\"order-content-msg\">\r\n\t\t\t\t<view class=\"order-msg-time\">\r\n\t\t\t\t\t{{`总周期${getWeeks}周 当前第${getWeekNumber(startTime,endTime,orderItem?.pay_time)}周`}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"order-content-number\">\r\n\t\t\t\t<view class=\"order-number-txt\">\r\n\t\t\t\t\t订单号\r\n\t\t\t\t</view>\r\n\t\t\t\t<span class=\"order-number\">{{orderItem?.order_number}}</span>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"order-content-number\">\r\n\t\t\t\t<view class=\"order-number-txt\">\r\n\t\t\t\t\t支付方式\r\n\t\t\t\t</view>\r\n\t\t\t\t<span class=\"order-number\">余额自动扣款</span>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"order-content-number\">\r\n\t\t\t\t<view class=\"order-number-txt\">\r\n\t\t\t\t\t订单实付金额\r\n\t\t\t\t</view>\r\n\t\t\t\t<span class=\"order-number\">{{`￥${orderItem?.amount}`}}</span>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"order-content-number\">\r\n\t\t\t\t<view class=\"order-number-txt\">\r\n\t\t\t\t\t订单创建时间\r\n\t\t\t\t</view>\r\n\t\t\t\t<span class=\"order-number\">{{formatTimestamp(create_time)}}</span>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"order-status-btn\" @click.stop=\"handleJump(orderItem?.orderId)\" v-if=\"getButtonTxt\">\r\n\t\t\t\t{{getButtonTxt}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: \"orderItem\",\r\n\t\tprops: {\r\n\t\t\torderItem: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => {\r\n\t\t\t\t\treturn {}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\toverlap: 20,\r\n\t\t\t\tavatarList: [\r\n\t\t\t\t\t'/static/logo.png',\r\n\t\t\t\t\t'/static/logo.png',\r\n\t\t\t\t\t'/static/logo.png'\r\n\t\t\t\t],\r\n\t\t\t\tstartTime: this.orderItem?.start_time || '',\r\n\t\t\t\tendTime: this.orderItem?.end_time || '',\r\n\t\t\t\ttimer: null,\r\n\t\t\t\tcreate_time: this.orderItem?.order_createTime\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tgetWeeks() {\r\n\t\t\t\tconst diffTime = Math.abs(this.endTime - this.startTime)\r\n\t\t\t\tconst diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\r\n\t\t\t\tconst weeks = Math.ceil(diffDays / 7)\r\n\t\t\t\treturn weeks\r\n\t\t\t},\r\n\t\t\tgetButtonTxt() {\r\n\t\t\t\tif (!this.orderItem?.time?.weeks?.isRunning) {\r\n\t\t\t\t\treturn '去评价'\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.orderItem?.isPay && this.orderItem?.time?.weeks?.isRunning) {\r\n\t\t\t\t\treturn '去支付'\r\n\t\t\t\t}\r\n\t\t\t\treturn '已支付'\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 将毫秒时间戳转化为日期格式\r\n\t\t\tformatTimestamp(timestamp) {\r\n\t\t\t\tconst date = new Date(timestamp);\r\n\t\t\t\tconst Y = date.getFullYear();\r\n\t\t\t\tconst M = String(date.getMonth() + 1).padStart(2, '0');\r\n\t\t\t\tconst D = String(date.getDate()).padStart(2, '0');\r\n\t\t\t\tconst h = String(date.getHours()).padStart(2, '0');\r\n\t\t\t\tconst m = String(date.getMinutes()).padStart(2, '0');\r\n\t\t\t\tconst s = String(date.getSeconds()).padStart(2, '0');\r\n\r\n\t\t\t\treturn `${Y}-${M}-${D} ${h}:${m}:${s}`;\r\n\t\t\t},\r\n\t\t\thandleJump(id) {\r\n\t\t\t\tif (this.getButtonTxt === '去评价') {\r\n\t\t\t\t\tconsole.log('去评价');\r\n\t\t\t\t}\r\n\t\t\t\tif (this.getButtonTxt === '去支付') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"跳转中...\",\r\n\t\t\t\t\t\ticon: \"loading\",\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\tduration: 500\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\t\t// 模糊查询 课程ID 或者orderID\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: `/pages/pay/pay?orderId=${id}`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetWeekNumber(startTime, endTime, payTime) {\r\n\t\t\t\tconst weekMillis = 7 * 24 * 60 * 60 * 1000;\r\n\t\t\t\tif (payTime < startTime || payTime > endTime) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = payTime - startTime;\r\n\t\t\t\tconst weekIndex = Math.floor(diff / weekMillis) + 1;\r\n\r\n\t\t\t\treturn weekIndex;\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tclearTimeout(this.timer)\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import url(\"orderListItem.css\");\r\n</style>","import Component from 'D:/code/project/Sports-Group-buying/components/orderListItem/orderListItem.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":";;AA+CC,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,OAAO;AAAA,IACN,WAAW;AAAA,MACV,MAAM;AAAA,MACN,SAAS,MAAM;AACd,eAAO,CAAC;AAAA,MACT;AAAA,IACD;AAAA,EACA;AAAA,EACD,OAAO;;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,YAAY;AAAA,QACX;AAAA,QACA;AAAA,QACA;AAAA,MACA;AAAA,MACD,aAAW,UAAK,cAAL,mBAAgB,eAAc;AAAA,MACzC,WAAS,UAAK,cAAL,mBAAgB,aAAY;AAAA,MACrC,OAAO;AAAA,MACP,cAAa,UAAK,cAAL,mBAAgB;AAAA;EAE9B;AAAA,EACD,UAAU;AAAA,IACT,WAAW;AACV,YAAM,WAAW,KAAK,IAAI,KAAK,UAAU,KAAK,SAAS;AACvD,YAAM,WAAW,KAAK,KAAK,YAAY,MAAO,KAAK,KAAK,GAAG;AAC3D,YAAM,QAAQ,KAAK,KAAK,WAAW,CAAC;AACpC,aAAO;AAAA,IACP;AAAA,IACD,eAAe;;AACd,UAAI,GAAC,sBAAK,cAAL,mBAAgB,SAAhB,mBAAsB,UAAtB,mBAA6B,YAAW;AAC5C,eAAO;AAAA,MACR;AACA,UAAI,GAAC,UAAK,cAAL,mBAAgB,YAAS,sBAAK,cAAL,mBAAgB,SAAhB,mBAAsB,UAAtB,mBAA6B,YAAW;AACrE,eAAO;AAAA,MACR;AACA,aAAO;AAAA,IACR;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,gBAAgB,WAAW;AAC1B,YAAM,OAAO,IAAI,KAAK,SAAS;AAC/B,YAAM,IAAI,KAAK;AACf,YAAM,IAAI,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACrD,YAAM,IAAI,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAChD,YAAM,IAAI,OAAO,KAAK,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AACjD,YAAM,IAAI,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACnD,YAAM,IAAI,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AAEnD,aAAO,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;AAAA,IACpC;AAAA,IACD,WAAW,IAAI;AACd,UAAI,KAAK,iBAAiB,OAAO;AAChCA,sBAAAA,MAAY,MAAA,OAAA,qDAAA,KAAK;AAAA,MAClB;AACA,UAAI,KAAK,iBAAiB,OAAO;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,MAAM;AAAA,UACN,UAAU;AAAA,SACV;AACD,aAAK,QAAQ,WAAW,MAAM;AAE7BA,wBAAAA,MAAI,WAAW;AAAA,YACd,KAAK,0BAA0B,EAAE;AAAA,WACjC;AAAA,QACD,GAAE,GAAG;AAAA,MACP;AAAA,IACA;AAAA,IACD,cAAc,WAAW,SAAS,SAAS;AAC1C,YAAM,aAAa,IAAI,KAAK,KAAK,KAAK;AACtC,UAAI,UAAU,aAAa,UAAU,SAAS;AAC7C,eAAO;AAAA,MACR;AACA,YAAM,OAAO,UAAU;AACvB,YAAM,YAAY,KAAK,MAAM,OAAO,UAAU,IAAI;AAElD,aAAO;AAAA,IACR;AAAA,EAIA;AAAA,EACD,WAAW;AACV,iBAAa,KAAK,KAAK;AAAA,EACxB;AACD;;;;;;;;;;;;;;;;;;;;;ACxID,GAAG,gBAAgB,SAAS;"}